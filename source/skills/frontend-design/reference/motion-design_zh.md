# 运动设计

## 持续时间：100/300/500规则

时间比缓动更重要。这些持续时间对大多数UI感觉正确：

| 持续时间 | 用例 | 示例 |
|----------|------|------|
| **100-150ms** | 即时反馈 | 按钮按下、切换、颜色变化 |
| **200-300ms** | 状态变化 | 菜单打开、工具提示、悬停状态 |
| **300-500ms** | 布局变化 | 手风琴、模态、抽屉 |
| **500-800ms** | 入口动画 | 页面加载、英雄揭示 |

**出口动画比入口快**——使用入口持续时间的~75%。

## 缓动：选择正确曲线

**不要使用 `ease`。** 它是很少最优的妥协。改为：

| 曲线 | 用于 | CSS |
|------|----|-----|
| **ease-out** | 元素进入 | `cubic-bezier(0.16, 1, 0.3, 1)` |
| **ease-in** | 元素离开 | `cubic-bezier(0.7, 0, 0.84, 0)` |
| **ease-in-out** | 状态切换（那里 → 回） | `cubic-bezier(0.65, 0, 0.35, 1)` |

**对微交互使用指数曲线**——它们感觉自然因为它们模仿真实物理（摩擦、减速）：

```css
/* 四分之一出 - 平滑，精致（推荐默认） */
--ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);

/* 五分之一出 - 稍微更戏剧性 */
--ease-out-quint: cubic-bezier(0.22, 1, 0.36, 1);

/* 指数出 - 敏捷，自信 */
--ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
```

**避免弹跳和弹性曲线。** 它们在2015年流行但现在感觉俗气和业余。真实物体停止时不弹跳——它们平滑减速。超调效果将注意力吸引到动画本身而不是内容。

## 你应该动画的唯一两个属性

**transform** 和 **opacity** 仅——其他一切引起布局重新计算。对高度动画（手风琴），使用 `grid-template-rows: 0fr → 1fr` 而不是直接动画 `height`。

## 错开动画

对清洁错开使用CSS自定义属性：`animation-delay: calc(var(--i, 0) * 50ms)` 每个项目上 `style="--i: 0"`。**限制总错开时间**——10项目在50ms = 500ms总。对许多项目，减少每项目延迟或限制错开计数。

## 减少运动

这不是可选的。平衡障碍影响超过40岁的35%成人。

```css
/* 正常定义动画 */
.card {
  animation: slide-up 500ms ease-out;
}

/* 为减少运动提供替代 */
@media (prefers-reduced-motion: reduce) {
  .card {
    animation: fade-in 200ms ease-out;  /* 交叉淡入而不是运动 */
  }
}

/* 或完全禁用 */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
  }
}
```

**保留什么**：功能动画如进度条、加载旋转器（减慢）和焦点指示器应该仍然工作——只是没有空间运动。

## 感知性能

**没人关心你的站点多快——只是感觉多快。** 感知可以像实际性能一样有效。

**80ms阈值**：我们的大脑缓冲感官输入~80ms同步感知。任何低于80ms感觉瞬间和同时。这是你的微交互目标。

**活跃 vs 被动时间**：被动等待（盯着旋转器）感觉更长于活跃参与。转移平衡的策略：

- **预先开始**：在加载时立即开始过渡（iOS应用缩放，骨架UI）。用户感知工作在发生。
- **早期完成**：渐进显示内容——不要等待一切。视频缓冲，渐进图像，流HTML。
- **乐观UI**：立即更新界面，优雅处理失败。Instagram喜欢离线工作——UI立即更新，后来同步。对低风险行动使用；避免支付或破坏操作。

**缓动影响感知持续时间**：缓入（朝完成加速）使任务感觉更短因为峰值结束效果重重权衡最终时刻。缓出对入口感觉满意，但缓入朝任务结束压缩感知时间。

**注意**：太快响应可能减少感知价值。用户可能对复杂操作（搜索、分析）不信任即时结果。有时短暂延迟信号"真实工作"在发生。

## 性能

不要预先使用 `will-change`——只有当动画迫在眉睫时（`:hover`、`.animating`）。对滚动触发动画，使用Intersection Observer而不是滚动事件；动画后一次取消观察。为一致性创建运动令牌（持续时间、缓动、常见过渡）。

---

**避免**：动画一切（动画疲劳是真实的）。对UI反馈使用>500ms。忽略 `prefers-reduced-motion`。使用动画隐藏慢加载。