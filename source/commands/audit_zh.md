---
name: audit
description: 对界面质量进行全面审计，涵盖可访问性、性能、主题和响应式设计。生成详细的问题报告，包括严重性评级和建议。
args:
  - name: area
    description: 要审计的功能或区域（可选）
    required: false
---

运行系统质量检查并生成全面审计报告，包含优先级问题和可操作建议。不要修复问题 - 为其他命令修复而记录它们。

**首先**：使用 frontend-design 技能获取设计原则和反模式。

## 诊断扫描

运行跨多个维度的全面检查：

1. **可访问性 (A11y)** - 检查：
   - **对比问题**：文本对比率 < 4.5:1（或AAA的7:1）
   - **缺失ARIA**：交互元素没有适当的角色、标签或状态
   - **键盘导航**：缺失焦点指示器、不合逻辑的制表顺序、键盘陷阱
   - **语义HTML**：不当的标题层次、缺失地标、div代替按钮
   - **替代文本**：缺失或差的图像描述
   - **表单问题**：输入没有标签、差的错误消息、缺失必需指示器

2. **性能** - 检查：
   - **布局颠簸**：在循环中读取/写入布局属性
   - **昂贵动画**：动画布局属性（宽度、高度、顶部、左侧）而不是变换/不透明度
   - **缺失优化**：图像没有懒加载、未优化资产、缺失will-change
   - **包大小**：不必要的导入、未使用的依赖
   - **渲染性能**：不必要的重新渲染、缺失记忆化

3. **主题** - 检查：
   - **硬编码颜色**：颜色不使用设计令牌
   - **损坏的暗模式**：缺失暗模式变体、暗主题中差的对比
   - **不一致令牌**：使用错误令牌、混合令牌类型
   - **主题切换问题**：主题变化时不更新的值

4. **响应式设计** - 检查：
   - **固定宽度**：在移动端断开的硬编码宽度
   - **触摸目标**：交互元素 < 44x44px
   - **水平滚动**：在窄视口上的内容溢出
   - **文本缩放**：文本大小增加时断开的布局
   - **缺失断点**：没有移动/平板变体

5. **反模式（关键）** - 检查frontend-design技能中所有**DON'T**指南。寻找AI slop迹象（AI调色板、渐变文本、玻璃拟态、英雄指标、卡片网格、通用字体）和一般设计反模式（颜色上的灰色、嵌套卡片、弹跳缓动、冗余副本）。

**关键**：这是一个审计，不是修复。彻底记录问题并清楚解释影响。使用其他命令（normalize、optimize、harden等）在审计后修复问题。

## 生成全面报告

使用以下结构创建详细审计报告：

### 反模式裁决
**从这里开始。** 通过/失败：这看起来是AI生成的吗？从技能的反模式部分列出具体迹象。残酷诚实。

### 执行摘要
- 发现的总问题数（按严重性计数）
- 最关键问题（前3-5）
- 整体质量分数（如果适用）
- 建议下一步

### 按严重性详细发现

对于每个问题，记录：
- **位置**：问题发生的地方（组件、文件、行）
- **严重性**：关键 / 高 / 中 / 低
- **类别**：可访问性 / 性能 / 主题 / 响应式
- **描述**：问题是什么
- **影响**：如何影响用户
- **WCAG/标准**：违反哪个标准（如果适用）
- **建议**：如何修复
- **建议命令**：使用哪个命令（例如，`/normalize`、`/optimize`、`/harden`）

#### 关键问题
[阻塞核心功能或违反WCAG A的问题]

#### 高严重性问题
[重大可用性/可访问性影响，WCAG AA违反]

#### 中等严重性问题
[质量问题，WCAG AAA违反，性能问题]

#### 低严重性问题
[轻微不一致，优化机会]

### 模式和系统问题

识别重复问题：
- "硬编码颜色出现在15+组件中，应该使用设计令牌"
- "触摸目标始终太小（<44px）在整个移动体验中"
- "所有自定义交互组件上缺失焦点指示器"

### 积极发现

注意什么工作良好：
- 要维护的好实践
- 在其他地方复制的典范实现

### 按优先级建议

创建可操作计划：
1. **立即**：首先修复的关键阻塞
2. **短期**：高严重性问题（这个冲刺）
3. **中期**：质量改进（下一个冲刺）
4. **长期**：优化和优化

### 修复建议命令

将问题映射到适当命令：
- "使用`/normalize`将组件与设计系统对齐（解决23个主题问题）"
- "使用`/optimize`改进性能（解决12个性能问题）"
- "使用`/harden`改进i18n和文本处理（解决8个边缘情况）"

**重要**：彻底但可操作。太多低优先级问题会产生噪音。专注于真正重要的事。

**绝不**：
- 报告没有解释影响的问题（为什么重要？）
- 不一致地混合严重性级别
- 跳过积极发现（庆祝有效的东西）
- 提供通用建议（具体和可操作）
- 忘记优先级（一切不能都是关键的）
- 报告未经验证的误报

记住：你是注重细节的质量审计员。系统记录，无情优先，提供清晰改进路径。一个好的审计使修复变得容易。