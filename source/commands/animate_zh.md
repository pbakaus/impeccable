---
name: animate
description: 审查功能并通过有目的的动画、微交互和运动效果来增强它，这些效果改善可用性和愉悦感。
args:
  - name: target
    description: 要动画化的功能或组件（可选）
    required: false
---

分析功能并战略性地添加动画和微交互，以增强理解、提供反馈并创造愉悦。

## 强制准备

### 上下文收集（首先做这个）

在没有必要上下文的情况下，你无法出色完成工作，例如目标受众（关键）、所需用例（关键）、品牌个性/语气（俏皮 vs 严肃、精力充沛 vs 平静）和性能约束。

尝试从当前线程或代码库中收集这些。

1. 如果你没有找到*确切*信息并且必须从现有设计和功能推断，你必须停止并{{ask_instruction}}是否正确。
2. 否则，如果你无法完全推断或你的信心水平中等或更低，你必须{{ask_instruction}}澄清问题首先完成你的上下文。

在你有答案之前不要继续。猜测会导致不适当或过度动画。

### 使用 frontend-design 技能

使用 frontend-design 技能来获取设计原则和反模式。在它执行并且你知道所有DO和DON'T之前不要继续。

---

## 评估动画机会

分析运动会改善体验的地方：

1. **识别静态区域**：
   - **缺失反馈**：没有视觉确认的操作（按钮点击、表单提交等）
   - **突兀过渡**：感觉突然的即时状态变化（显示/隐藏、页面加载、路由变化）
   - **不清楚关系**：空间或层次关系不明显
   - **缺乏愉悦**：功能但无趣的交互
   - **错过引导**：引导注意或解释行为的机遇

2. **理解上下文**：
   - 个性是什么？（俏皮 vs 严肃、精力充沛 vs 平静）
   - 性能预算是什么？（移动优先？复杂页面？）
   - 受众是谁？（对运动敏感的用户？想要速度的超级用户？）
   - 最重要的是什么？（一个英雄动画 vs 许多微交互？）

如果这些从代码库中不清楚，{{ask_instruction}}

**关键**：尊重`prefers-reduced-motion`。始终为需要它们的用户提供非动画替代方案。

## 规划动画策略

创建有目的的动画计划：

- **英雄时刻**：一个标志性动画是什么？（页面加载？英雄部分？关键交互？）
- **反馈层**：哪些交互需要确认？
- **过渡层**：哪些状态变化需要平滑？
- **愉悦层**：在哪里我们可以惊喜和愉悦？

**重要**：一个精心编排的体验胜过到处分散的动画。专注于高影响时刻。

## 实施动画

系统地在这些类别中添加运动：

### 入口动画
- **页面加载编排**：错开元素揭示（100-150ms延迟），淡入+滑动组合
- **英雄部分**：主要内容的戏剧性入口（缩放、视差或创意效果）
- **内容揭示**：使用交叉观察器的滚动触发动画
- **模态/抽屉入口**：平滑滑动+淡入，背景淡入，焦点管理

### 微交互
- **按钮反馈**：
  - 悬停：微妙缩放（1.02-1.05），颜色变化，阴影增加
  - 点击：快速缩放向下然后向上（0.95 → 1），涟漪效果
  - 加载：旋转器或脉冲状态
- **表单交互**：
  - 输入焦点：边框颜色过渡，轻微缩放或发光
  - 验证：错误时摇晃，成功时勾选标记，平滑颜色过渡
- **切换开关**：平滑滑动+颜色过渡（200-300ms）
- **复选框/单选**：勾选标记动画，涟漪效果
- **喜欢/收藏**：缩放+旋转，粒子效果，颜色过渡

### 状态过渡
- **显示/隐藏**：淡入+滑动（不是即时），适当时间（200-300ms）
- **展开/折叠**：高度过渡与溢出处理，图标旋转
- **加载状态**：骨架屏幕淡入，旋转器动画，进度条
- **成功/错误**：颜色过渡，图标动画，轻微缩放脉冲
- **启用/禁用**：不透明度过渡，光标变化

### 导航和流程
- **页面过渡**：路由间交叉淡入，共享元素过渡
- **标签切换**：滑动指示器，内容淡入/滑动
- **轮播/滑块**：平滑变换，吸附点，动量
- **滚动效果**：视差层，粘性标题与状态变化，滚动进度指示器

### 反馈和引导
- **悬停提示**：工具提示淡入，光标变化，元素高亮
- **拖拽**：抬起效果（阴影+缩放），放置区域高亮，平滑重新定位
- **复制/粘贴**：粘贴时短暂高亮闪烁，"已复制"确认
- **焦点流程**：通过表单或工作流程的高亮路径

### 愉悦时刻
- **空状态**：插图上的微妙浮动动画
- **完成操作**：五彩纸屑，勾选标记花饰，成功庆祝
- **彩蛋**：隐藏交互以供发现
- **上下文动画**：天气效果、时段主题、季节触感

## 技术实施

为每个动画使用适当技术：

### 时间和缓动

**按目的持续时间：**
- **100-150ms**：即时反馈（按钮按下，切换）
- **200-300ms**：状态变化（悬停，菜单打开）
- **300-500ms**：布局变化（手风琴，模态）
- **500-800ms**：入口动画（页面加载）

**缓动曲线（使用这些，不是CSS默认值）：**
```css
/* 推荐 - 自然减速 */
--ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);    /* 平滑，精致 */
--ease-out-quint: cubic-bezier(0.22, 1, 0.36, 1);   /* 稍微更敏捷 */
--ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);     /* 自信，果断 */

/* 避免 - 感觉过时和俗气 */
/* bounce: cubic-bezier(0.34, 1.56, 0.64, 1); */
/* elastic: cubic-bezier(0.68, -0.6, 0.32, 1.6); */
```

**退出动画比入口更快。** 使用入口持续时间的~75%。

### CSS动画
```css
/* 优先用于简单、声明式动画 */
- 状态变化的过渡
- 复杂序列的关键帧
- 仅变换 + 不透明度（GPU加速）
```

### JavaScript动画
```javascript
/* 用于复杂、交互式动画 */
- Web Animations API 用于程序控制
- Framer Motion 用于React
- GSAP 用于复杂序列
```

### 性能
- **GPU加速**：使用`transform`和`opacity`，避免布局属性
- **will-change**：谨慎添加已知昂贵动画
- **减少绘制**：最小化重绘，在适当的地方使用`contain`
- **监控FPS**：确保目标设备上60fps

### 可访问性
```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

**绝不**：
- 使用弹跳或弹性缓动曲线——感觉过时并将注意力吸引到动画本身
- 动画布局属性（宽度、高度、顶部、左侧）——改为使用变换
- 反馈持续时间超过500ms——感觉滞后
- 无目的动画——每个动画都需要理由
- 忽略`prefers-reduced-motion`——这是可访问性违规
- 动画一切——动画疲劳使界面感觉疲惫
- 在动画期间阻止交互，除非故意

## 验证质量

彻底测试动画：

- **60fps平滑**：目标设备上无卡顿
- **感觉自然**：缓动曲线感觉有机，不是机器人
- **适当时间**：不太快（突兀）或太慢（滞后）
- **减少运动有效**：动画适当禁用或简化
- **不阻塞**：用户可以在动画期间/后交互
- **增加价值**：使界面更清晰或更愉悦

记住：运动应该增强理解并提供反馈，而不仅仅添加装饰。有目的动画，尊重性能约束，始终考虑可访问性。伟大的动画是隐形的 - 它只是让一切感觉正确。